/**
 * @license ng-gc-mock-directive v0.1.0
 * (c) 2013-2013 GoCardless, Ltd.
 * https://github.com/gocardless-ng/ng-gc-mock-directive.git
 * License: MIT
 */
!function(){"use strict";angular.module("mock-template.html",[]).run(["$templateCache",function(a){a.put("mock-template.html",'<div><div ng-show="user.real_user.admin" ng-init="mockVisible = false" class="mock-bar" ng-class="{\n      \'mock-bar--mocked\': user.email != user.real_user.email\n    }"><button toggle="mockVisible" class="mock-bar__toggle">{{ user.email }}</button><div class="mock-bar__content" ng-show="mockVisible"><div class="u-padding-Am u-padding-Bn u-cf"><div class="u-cf"><label class="label label--stacked u-pull-start" for="mock-user">Admin account: {{ user.real_user.email }}, viewing:</label><a class="u-pull-end u-text-h5" ng-click="endSession()" href="" ng-show="user.email != user.real_user.email">End session</a></div><form name="mockForm"><input type="text" class="input input--small input--block" ng-model="user.email" required="" placeholder="email or user id" id="mock-user"><div class="error-label" ng-show="mockError">{{ mockError }}</div><div class="u-padding-Vs"></div><input class="btn btn--info input--stacked btn--small btn--block" ng-click="changeSession()" type="submit" value="Change session" ng-disabled="mockForm.$invalid"></form></div></div></div></div>')}]),angular.module("gc.mockController",["ngGcUserApiService","gc.mockService"]).controller("MockController",["$scope","$window","MockService","UserApiService",function(a,b,c,d){d.findOne().then(function(b){a.user=b}),a.endSession=function(){c.destroy().then(function(){b.location.replace("/")})},a.mockErrorMessage=function(a){var b={404:"User not found",fallback:"Error, try again"};return a in b?b[a]:b.fallback},a.changeSession=function(){a.user.real_user&&c.create({data:{user:a.user.email}}).then(function(){b.location.replace("/")},function(b){a.mockError=a.mockErrorMessage(b.status)})}}]),angular.module("gc.mock",["gc.toggle","gc.mockController","mock-template.html"]).directive("mock",[function(){return{restrict:"E",templateUrl:"mock-template.html",replace:!0,controller:"MockController",scope:{}}}]),angular.module("gc.mockService",["ngHttpFactory"]).factory("MockService",["HttpFactory",function(a){return a.create({url:"/api/admin/user_mock/:id"},{create:{method:"POST"},destroy:{method:"DELETE"}})}])}();